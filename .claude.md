# Uffizi Unveiled - Project Documentation

## Project Overview

**Uffizi Unveiled** is a Progressive Web App (PWA) mobile guidebook for the Uffizi Gallery in Florence, Italy. It provides visitors with comprehensive information about 44 masterpieces across two floors, along with an introduction to the museum's history. The app supports **15 languages** with full offline functionality.

---

## Tech Stack

- **Frontend:** React 18
- **Styling:** Tailwind CSS
- **Build Tool:** Vite 5.0.8 with vite-plugin-pwa
- **Offline Support:** Service Worker via Workbox
- **Icons:** Lucide React
- **Error Monitoring:** Sentry
- **Languages:** 15 supported (custom i18n implementation)

---

## Supported Languages

| Code | Language | Native Name | RTL | Popular |
|------|----------|-------------|-----|---------|
| en | English | English | No | Yes |
| it | Italian | Italiano | No | Yes |
| es | Spanish | Español | No | Yes |
| fr | French | Français | No | Yes |
| de | German | Deutsch | No | Yes |
| zh | Chinese | 中文 | No | Yes |
| ja | Japanese | 日本語 | No | No |
| ko | Korean | 한국어 | No | No |
| pt | Portuguese | Português | No | No |
| ru | Russian | Русский | No | No |
| ar | Arabic | العربية | **Yes** | No |
| nl | Dutch | Nederlands | No | No |
| pl | Polish | Polski | No | No |
| el | Greek | Ελληνικά | No | No |
| hi | Hindi | हिन्दी | No | No |

---

## Project Structure

```
uffizi-guide/
├── public/
│   ├── data/
│   │   ├── introduction.json          # English (legacy/fallback)
│   │   ├── second-floor.json          # English (legacy/fallback)
│   │   ├── first-floor.json           # English (legacy/fallback)
│   │   ├── ar/                         # Arabic (RTL)
│   │   │   ├── introduction.json
│   │   │   ├── second-floor.json
│   │   │   └── first-floor.json
│   │   ├── de/                         # German
│   │   │   └── ...
│   │   ├── el/                         # Greek
│   │   │   └── ...
│   │   ├── en/                         # English
│   │   │   └── ...
│   │   ├── es/                         # Spanish
│   │   │   └── ...
│   │   ├── fr/                         # French
│   │   │   └── ...
│   │   ├── hi/                         # Hindi
│   │   │   └── ...
│   │   ├── it/                         # Italian
│   │   │   └── ...
│   │   ├── ja/                         # Japanese
│   │   │   └── ...
│   │   ├── ko/                         # Korean
│   │   │   └── ...
│   │   ├── nl/                         # Dutch
│   │   │   └── ...
│   │   ├── pl/                         # Polish
│   │   │   └── ...
│   │   ├── pt/                         # Portuguese
│   │   │   └── ...
│   │   ├── ru/                         # Russian
│   │   │   └── ...
│   │   └── zh/                         # Chinese
│   │       └── ...
│   ├── images/
│   │   ├── hero/                       # Full-size artwork images
│   │   │   ├── introduction/           # Introduction section images
│   │   │   └── *.webp                  # Artwork hero images
│   │   ├── thumbnails/                 # Thumbnail images
│   │   │   ├── introduction/           # Introduction thumbnails
│   │   │   └── *.webp                  # Artwork thumbnails
│   │   └── logo/                       # Company logo
│   ├── manifest.json                   # PWA manifest
│   └── .htaccess                       # Apache SPA routing config
├── src/
│   ├── App.jsx                         # Main app (~1030 lines)
│   ├── main.jsx                        # React entry point
│   └── index.css                       # Tailwind styles
├── dist/                               # Production build output
├── index.html                          # HTML entry with meta tags
├── .claude.md                          # This file
├── PDR.md                              # Product Requirements Document
├── package.json
├── vite.config.js
└── tailwind.config.js
```

---

## Translation System (i18n)

### Architecture

The app uses a **custom i18n implementation** (no external libraries like i18next). All translations are stored in JSON files organized by language code.

### Data Files Per Language (45 total files)

Each language folder contains 3 JSON files:
1. `introduction.json` - 7 history sections + UI strings
2. `second-floor.json` - 26 artworks (Rooms A1-A41)
3. `first-floor.json` - 18 artworks (Rooms B-E)

### JSON Structure with UI Strings

```json
{
  "id": "uffizi-introduction",
  "title": "Uffizi Gallery: History & Introduction",
  "sections": [...],
  "ui": {
    "title": "Introduction",
    "subtitle": "History of the Uffizi Gallery",
    "back": "Back",
    "previous": "Previous",
    "next": "Next",
    "welcome": {
      "appTitle": "Uffizi Unveiled",
      "appSubtitle": "Your Private Art Guide",
      "languagesAvailable": "15 Languages Available",
      "enterButton": "Enter Gallery Guide",
      "offlineNote": "Works offline after first load"
    },
    "languageModal": {
      "title": "Select Language",
      "subtitle": "Choose your preferred language",
      "searchPlaceholder": "Search languages...",
      "popular": "Popular",
      "allLanguages": "All Languages",
      "results": "Results",
      "noResults": "No language found",
      "noResultsHint": "Try a different search term",
      "rtlEnabled": "Right-to-left layout enabled:"
    },
    "mainMenu": {
      "header": "Uffizi Unveiled",
      "loading": "Loading gallery data...",
      "errorTitle": "Error Loading Data",
      "tryAgain": "Try Again",
      "introduction": "Introduction",
      "introSubtitle": "History of the Uffizi Gallery",
      "secondFloor": "Second Floor",
      "firstFloor": "First Floor",
      "artworks": "artworks",
      "footer": "Florence With Locals · Offline Available"
    },
    "navigation": {
      "introduction": "Introduction",
      "secondFloor": "2nd Floor",
      "firstFloor": "1st Floor",
      "menu": "Menu",
      "backToList": "Back to List",
      "list": "List"
    },
    "floorPage": {
      "artworksToDiscover": "artworks to discover",
      "masterpieces": "Masterpieces",
      "exploreText": "Explore the masterpieces on this floor."
    },
    "artworkDetail": {
      "viewingTips": "Viewing Tips:",
      "offlineNote": "*This content is stored locally for offline access."
    }
  }
}
```

### Language Selection Flow

1. User opens app → Welcome page shows language selector button
2. Click language button → Modal with searchable language list
3. Select language → App reloads data from `/data/{lang}/` folder
4. Language preference saved to `localStorage`
5. RTL layout applied automatically for Arabic

### Adding a New Language

1. Create folder: `public/data/{lang_code}/`
2. Copy English JSON files as templates
3. Translate all content and UI strings
4. Add language to `LANGUAGES` object in `App.jsx`:
```javascript
const LANGUAGES = {
  // ...existing languages
  newlang: {
    code: 'newlang',
    name: 'New Language',
    nativeName: 'Native Name',
    countryCode: 'XX',
    rtl: false,
    popular: false
  },
};
```

---

## Data Structure

### introduction.json
```json
{
  "id": "uffizi-introduction",
  "title": "Uffizi Gallery: History & Introduction",
  "sections": [
    {
      "id": "what-the-uffizi-is",
      "title": "What the Uffizi Is",
      "content": "Description text...",
      "image": {
        "hero": "/images/hero/introduction/UFFIZI_EXTERIOR.webp",
        "thumbnail": "/images/thumbnails/introduction/UFFIZI_EXTERIOR.webp",
        "alt": "Uffizi Gallery exterior view"
      },
      "tags": ["overview"]
    }
  ],
  "ui": { ... }
}
```

### second-floor.json / first-floor.json
```json
{
  "floor": "Second Floor",
  "floorId": "second",
  "floorNumber": 2,
  "description": "Floor description...",
  "items": [
    {
      "id": "the-birth-of-venus-botticelli",
      "type": "artwork",
      "title": "The Birth of Venus",
      "roomCode": "A11-A12",
      "artist": "Sandro Botticelli",
      "year": "c. 1484-1486",
      "description": "Artwork description...",
      "image": {
        "hero": "/images/hero/BOTTICELLI_BIRTH_VENUS.webp",
        "thumbnail": "/images/thumbnails/BOTTICELLI_BIRTH_VENUS.webp",
        "alt": "Sandro Botticelli, The Birth of Venus"
      },
      "viewing_tips": ["Tip 1", "Tip 2", "Tip 3"]
    }
  ],
  "ui": { ... }
}
```

**Item Types:** `artwork`, `sculpture`, `room`, `section`

---

## App Pages

| Page | Enum | Description |
|------|------|-------------|
| Welcome | `WELCOME` | Entry screen with logo, language selector, "Enter" button |
| Main Menu | `MAIN_MENU` | Three options: Introduction, Second Floor, First Floor |
| Introduction | `INTRODUCTION` | List of 7 history sections with thumbnails |
| Intro Detail | `INTRO_DETAIL` | Individual history section with hero image |
| Floor List | `FLOOR_LIST` | List of artworks for selected floor |
| Artwork Detail | `ARTWORK_DETAIL` | Individual artwork with image and viewing tips |
| Language Modal | `LANGUAGE_MODAL` | Searchable language selector overlay |

---

## User Flow

```
Welcome Page (with language selector)
      ↓
Main Menu
      ↓
┌─────────────────────────────────────┐
│  Introduction  │  2nd Floor  │  1st Floor  │
└─────────────────────────────────────┘
      ↓                ↓              ↓
Section List     Artwork List   Artwork List
      ↓                ↓              ↓
Section Detail   Artwork Detail  Artwork Detail
```

---

## Artworks Summary

### Second Floor (Rooms A1-A41) - 26 Artworks
Key highlights:
- Giotto: Ognissanti Madonna (A4)
- Simone Martini: Annunciation (A5)
- Botticelli: Primavera, Birth of Venus (A11-A12)
- Leonardo: Annunciation, Adoration of the Magi (A35)
- Michelangelo: Doni Tondo (A38)
- Raphael: Madonna del Cardellino (A38)

### First Floor (Rooms B-E) - 18 Artworks
Key highlights:
- Titian: Venus of Urbino (B1-B6)
- Caravaggio: Medusa, Bacchus, Sacrifice of Isaac (E1-E4)
- Artemisia Gentileschi: Judith Slaying Holofernes (E1-E4)
- Rembrandt: Self-Portrait as a Young Man (D15-D16)

---

## Bottom Navigation

Four tabs available on all content pages:
1. **Introduction** - History sections
2. **2nd Floor** - Second floor artworks
3. **1st Floor** - First floor artworks
4. **Menu** - Return to main menu

---

## Commands

```bash
# Development
npm run dev

# Production build
npm run build

# Preview production build
npm run preview
```

---

## Deployment

### Production Build

```bash
npm run build
```

Output in `dist/` folder (~694KB JS+CSS, ~1.85MB total with precache).

### Hostinger Deployment

1. Run `npm run build`
2. Upload entire `dist/` folder contents to `/public_html/uffizi/`
3. Ensure `.htaccess` is included (required for SPA routing)
4. Clear browser cache/service worker when updating

### Apache .htaccess Configuration

The `.htaccess` file handles:
- SPA routing (redirect all requests to index.html)
- GZIP compression
- Browser caching for static assets
- Security headers (XSS protection, clickjacking prevention)
- Service worker cache control

---

## Image Naming Convention

**Artworks:** `ARTIST_TITLE.webp`
- Example: `BOTTICELLI_BIRTH_VENUS.webp`
- Example: `CARAVAGGIO_MEDUSA.webp`

**Introduction:** `/images/[hero|thumbnails]/introduction/IMAGE_NAME.webp`
- Example: `UFFIZI_EXTERIOR.webp`
- Example: `VASARI_CORRIDOR.webp`

**Placeholder:** `placeholder.jpg` (used when image not available)

---

## RTL Support

Arabic (`ar`) is the only RTL language. When selected:
- `dir="rtl"` attribute applied to document
- CSS automatically flips layout direction
- Navigation and text alignment reversed
- All UI elements properly mirrored

---

## Current Status

### Completed
- React 18 PWA with full offline support
- 15 languages with complete translations
- Custom i18n system (no external libraries)
- RTL support for Arabic
- 3-file JSON data structure per language (45 files total)
- 44 artworks with images and viewing tips
- 7 introduction sections
- Floor-based navigation
- Hash-based deep linking for artworks
- Responsive mobile-first design
- Language modal with search functionality
- localStorage language persistence
- Production build optimized and deployed

### Technical Stats
- **Total Translation Files:** 45 (3 files × 15 languages)
- **Total Artworks:** 44 (26 second floor + 18 first floor)
- **Introduction Sections:** 7
- **App.jsx Lines:** ~1030
- **Build Size:** ~694KB (JS+CSS)
- **Precache Size:** ~1.85MB

---

## Notes

- Room numbers use A-E prefix system (A = Second Floor, B-E = First Floor)
- Deep linking: `/#artwork-id` links directly to artwork
- Images stored in `public/images/hero/` and `public/images/thumbnails/`
- Language preference persisted in localStorage as `uffizi-language`
- All content available offline after initial load per language
- Service worker caches data files, images, and app shell

---

*Last Updated: 2026-01-21*
